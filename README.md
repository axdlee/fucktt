# 价值观内容过滤器

## 项目简介

这是一个独立的移动应用，用于智能过滤《今日头条》中不符合用户个人价值观的文章和评论内容。应用通过用户自配置的AI接口（如OpenAI、DeepSeek等）实现内容分析，支持自定义Prompt和多AI模型选择。

## 核心特性

### 🤖 AI驱动的内容分析
- 支持多种AI服务商：OpenAI、DeepSeek、Anthropic、Google Gemini等
- 用户自配置API密钥，无后端依赖
- 支持自定义Prompt模板
- 智能负载均衡和故障转移

### 💡 个性化价值观配置
- 预设价值观模板（政治立场、社会价值、经济观念等）
- 支持自定义价值观类别和关键词
- 黑白名单机制
- 权重调节系统

### 🧠 AI记忆学习系统
- 基于用户行为的价值观学习
- 通用AI接口实现用户偏好沉淀
- 动态优化过滤策略
- 个人画像构建

### 🎯 智能内容过滤
- 实时内容分析
- 多级过滤策略（允许/警告/模糊/屏蔽）
- 一键举报和屏蔽功能
- 悬浮操作界面

### 🛡️ 隐私保护
- 纯客户端应用，无服务器
- 本地数据存储和加密
- 用户完全控制数据
- 支持配置导出导入

## 技术架构

### 技术栈
- **Flutter 3.x** - 跨平台UI框架
- **Dart** - 现代化编程语言
- **Provider** - 状态管理
- **Hive** - 高性能本地数据库
- **Dio** - 网络请求库
- **Material Design 3** - 现代化设计语言

### 架构设计
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   UI表现层      │    │   业务逻辑层    │    │   数据获取层    │
│                 │    │                 │    │                 │
│ • 现代化界面    │    │ • 内容过滤引擎  │    │ • 屏幕内容捕获  │
│ • 配置管理界面  │    │ • AI接口管理器  │    │ • OCR文字识别   │
│ • 实时过滤显示  │    │ • Prompt引擎    │    │ • 内容标准化    │
│ • 快捷操作面板  │    │ • 决策执行器    │    │ • 内容缓存管理  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
        │                        │                        │
        └────────────────────────┼────────────────────────┘
                                 │
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   AI集成层      │    │   本地存储层    │    │   权限管理层    │
│                 │    │                 │    │                 │
│ • OpenAI适配器  │    │ • 配置数据库    │    │ • 无障碍服务    │
│ • DeepSeek适配器│    │ • 用户偏好存储  │    │ • 悬浮窗权限    │
│ • 自定义AI适配器│    │ • 历史记录管理  │    │ • 屏幕捕获权限  │
│ • 统一AI接口    │    │ • Prompt模板库  │    │ • 通知权限管理  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 核心模块

#### 1. 数据模型层 (`lib/models/`)
- `ai_provider_model.dart` - AI服务提供商模型
- `value_template_model.dart` - 价值观模板模型
- `prompt_template_model.dart` - Prompt模板模型
- `behavior_model.dart` - 用户行为和内容分析模型
- `user_config_model.dart` - 用户配置模型

#### 2. 服务层 (`lib/services/`)
- `storage_service.dart` - 本地存储服务
- `ai_service_manager.dart` - AI服务管理器
- `behavior_log_service.dart` - 行为日志服务
- `user_config_service.dart` - 用户配置服务

#### 3. 状态管理层 (`lib/providers/`)
- `app_provider.dart` - 应用全局状态
- `ai_provider.dart` - AI服务状态
- `values_provider.dart` - 价值观管理状态
- `content_provider.dart` - 内容分析状态

#### 4. 界面层 (`lib/pages/` & `lib/widgets/`)
- `home_page.dart` - 主页界面
- `values_config_page.dart` - 价值观配置页面
- `ai_config_page.dart` - AI服务配置页面
- 通用UI组件和工具

## 安装和使用

### 环境要求
- Flutter 3.10.0+
- Dart 3.0.0+
- Android SDK (Android开发)
- Xcode (iOS开发)

### 安装步骤

1. **克隆项目**
```bash
git clone [项目地址]
cd value_filter
```

2. **安装依赖**
```bash
flutter pub get
```

3. **生成代码**
```bash
flutter packages pub run build_runner build
```

4. **运行应用**
```bash
flutter run
```

### 配置AI服务

1. 打开应用，进入"AI配置"页面
2. 添加AI服务提供商：
   - **OpenAI**: 需要API Key和Base URL
   - **DeepSeek**: 需要API Key
   - **自定义**: 支持OpenAI兼容格式的服务
3. 测试连接并启用服务
4. 配置模型参数（温度、最大Token等）

### 配置价值观

1. 进入"价值观配置"页面
2. 启用预设模板或创建自定义模板
3. 设置关键词和权重
4. 配置黑白名单
5. 调整过滤策略

### 使用过滤功能

1. 确保已配置AI服务和价值观
2. 启用悬浮按钮（可选）
3. 在今日头条中浏览内容
4. 应用将自动分析内容并应用过滤策略
5. 可通过悬浮按钮进行手动操作

## 开发指南

### 添加新的AI服务提供商

1. 在`ai_service_interface.dart`中实现`AIService`接口
2. 在`ai_service_manager.dart`中注册新服务
3. 更新UI配置页面

### 添加新的价值观类别

1. 在`app_constants.dart`中添加新类别
2. 创建对应的模板
3. 更新UI配置界面

### 自定义Prompt模板

1. 在应用中进入"Prompt管理"
2. 创建新模板或修改现有模板
3. 测试模板效果
4. 应用到内容分析

## 项目状态

当前版本：v1.0.0-alpha

### 已完成功能
- ✅ 项目基础架构
- ✅ 数据模型和存储层
- ✅ AI接口管理系统
- ✅ 状态管理和Provider
- ✅ 主应用界面
- ✅ 基础UI组件

### 开发中功能
- 🚧 价值观配置界面
- 🚧 AI服务配置页面
- 🚧 内容获取模块
- 🚧 悬浮操作界面
- 🚧 AI记忆学习系统

### 计划功能
- 📋 权限管理系统
- 📋 数据导出导入
- 📋 性能优化
- 📋 单元测试

## 贡献指南

1. Fork项目
2. 创建功能分支
3. 提交代码
4. 发起Pull Request

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 邮件联系
- 技术交流群

---

**注意**: 本应用仅用于个人学习和研究目的，请遵守相关法律法规和平台使用协议。